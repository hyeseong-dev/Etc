
# 저장소 만들기 

*참고: 
    gitbash 명령어: 
                    1.pwd - 현재 위치를 디렉토리 위치를 알려준다.
                    2. mkdir 디렉토리명 - 현재위치에서 폴더를 생성함. 

#### 첫째, 현재 우리가 버전관리를 위한 폴더를 깃에게 알려줍니다.

우선 'git'이라는 명령어를 입력하면 사용할 수 있는 명령어들이 나타납니다. 

    > git init
    라고 나타남. "Initialzed empty Git repository in ~/OneDrive/바탕 화면/main/Etc/웹참고/생활코딩/프로젝트관리/gitfth"
    즉, 깃 저장소 초기화했음.


# git이 관리할 대상으로 파일 등록
예제를 만들어서 사용해 보겠습니다. 

    첫 단계, f1.txt 생성
> vim f1.txt
vim을 통해서 f1.txt를 편집하겠다라는 의미(기존에 있지않다면 생성함)) 
화면이 전환되어 vim편집모드로 f1.txt파일로 들어갑니다.
아무키나 입력해도 입력되지 않습니다. 이유는 입력모드가 아니기 때문이조. 
그럼 입력 모드로 바꾸어야겠조? 
알파벳 i를 누르면 insert라고 하단에 무언가가 생성되고 변환된다. 
이제 무언가를 키보드로 입력할 수 있는 상태로 전환되었습니다. 
source: 1라고 적어보세요.  입력이 끝났다면 ESC 버튼을 누르면, 입력할 수 없는 상태로 바뀝니다.( 다시 입력할려면 i를 누르세요. )

그렇다면 이제 작성한 내용 source: 1을 종료하고 싶은면 아래 명령어를 따라하세요. 
> :wq (WriteQuit의 약자)

> cat f1.txt 
만약 파일의 내용을 보고 싶다면, 아래 두가지 방법을 사용하면 됩니다. 
방법 1) vim f1.txt
방법 2) cat f1.txt

버전 관리에서 가장 먼저 확인해야할 명령어는 

    'status'입니다. 

> git status
Untracked files:
  (use "git add <file>..." to include in what will be committed)
        f1.txt
라고 위와 같이 나타납니다. 
그렇다면 untracked 상태의 파일들을 이제부터 추적시켜줘야 버전 관리를 해 줄수 있는 단계로 진입하겠조? 그 방법이 바로!

> git add f1.txt
를 입력하면 Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
        new file:   f1.txt
라고 알려줍니다. 즉, commit 되어질 변화 상태라는 걸 보여주는 겁니다. 
이제 버전으로 텍스트 파일을 관리하는 다음 단계로 진입해야조?

# 버전 만들기(commit)

    - 버전이란 무엇인가?
        버전과 변화의 차이는?   
        버전: 의미있는 변화를 말함. 
              특정한 작업이 있다면 그 작업 단위의 고유한 이름을 의미함.      (출처: 생활코딩)

깃을 처음 쓰는 당신이 우선 적으로 해야 할 것이 있습니다. 
만들 버전이 '내가 만들었다고 이름을 써야합니다.'
(1) git config --global user.name 깃사용자이름
>   git config --global user.name 이혜성

(2) git config --global user.email xxxxx@gmail.com 라고 이메일도 입력함.
>   git config --global user.email xxxxx@gmail.com

> git commit
이라고 입력하게 되면 vim이 실행됩니다. 
#으로 된 부분은 일반적으로 무시하면 됩니다. 
이 vim상태에서는 버전의 변화를 작성하는 것입니다. 이 변화가 어떤 변화를 담고 있는지 알려줍니다. 다른 말로는 commit 메시지라고 합니다. 
입력하려면 i를 누르고 입력하세요.
ex. <중요> 1을 입력하고 엔터치고,ESQ를 누른 다음 :wq를 입력하고 엔터치세요. 

이게 여기서 가장 중요합니다. 버전 관리는 결국 변화된 파일들이 어떻게 변화 되었는지 발자국을 남겨야하는데 바로 이 commit단계의 message가 필연적이라는 겁니다. 

> git log
이 명령어는 버전 생성이 되었는지 확인 할 수 있음. 
아래와 같은 메시지가 나옵니다. 

Author: 이혜성 <hyeseong43@gmail.com>
Date:   Thu May 7 20:49:36 2020 +0900

    1

버전 작성자가 나타나고 해당 날짜와시간 그리고 commit메시지가 나옵니다. 

다시 한번 버전 관리를 해보조. 

> vim f1.txt
이번에는 source : 1에서 1을 2로 바꿔서 ESQ누르고 다시 :qw 엔터치고 나옵니다. 

> git status 
modified:   f1.txt 라는 마지막 문구가 눈에 띄네요. 즉 수정되었음을 빨간색으로 표시해 줍니다. 


> 이 상태에서 git commit하면 안됩니다. 

> 대신 git add f1.txt를 또 실행합니다. 
이는 버전 관리시스템에게 이 작업을 더하라는 의미겠조?

> git status
입력하면 modified되었다고 초록색 글자가 보입니다. 

# Stage area
### git은 commit 전에 add를 꼭해야 합니다. 그 이유는 선택적으로 파일을 버전에 포함시키기 위해서 입니다. 여기서는 이에 대한 설명을 합니다. 

> cp f1.txt 
f1.txt파일을 복사하여 생성합니다. 

> git status
버전 관리가 필요한 파일은 빨간색으로 나타난다. 

> git add f2.txt 
new file: f2.txt라는 문구가 나옵니다. 

> git commit
한 이후 3을 입력하고 나옵니다. 

> git log 
역사를 확인하는 방법. 어떤 버전 상태인지 즉 누가 언제 어떤 commit메시지를 남겼는지 확인함.

#### 이번에는 f1.txt와 f2.txt를 모두 수정해서 버전 관리 해봅시다. 

> vim f1.txt 
f1.txt : 4 라고 남깁니다. 

> vim f2.txt 
f2.txt : 4 라고 남기고 나옵니다.

> cat f1.txt
> cat f2.txt
각각 커밋 메시지를 확인합니다. 

> git status 
이러면 파일 2개가 modified된 상태입니다. 

상황 설명 거대한 파일을 하거나 여러 파일들을 add 하는 상태에서 중간에 commit을 놓치는 경우가 있습니다. 이럴때 유용합니다 

우선 
> git add f1.txt
> git status
f1.txt는 초록색 f2.txt는 빨간색으로 나타남. 

> git commit 
하게 되면 f1.txt는 새로운 버전에 포함되지만 f2.txt는 새로운 버전에 포함되지 않습니다. 
4를 입력하고 ESC를 누르고 다시 :wq를 입력합니다. 

> git status 
하게 되면 아까 add하지 않은 f2.txt파일은 여전히 빨간색으로 modified상태로 남아있게 됩니다. 
전체적으로 점검해보자면 f1.txt는 commit 대기상태에 있습니다. 
반대로 f2.txt는 commit대기 상태가 아니에요. 
다른 말로 f1.txt는 stage area에 있는것이고 f2.txt는 그렇지 않음.

    - 크게 개념 정리 하자면
    1. stage area   : commit되어 원격저장소에 가기전 파일들이 가는 영역(로컬저장소)  
    2. repository   : commit대기 상태로 있는 놈들이 github라는 원격저장소에 가는 곳

# 변경 사항 확인하기 

### 버전관리를 하는 가장 중요한 효용은 수정된 내용을 추적해서 문제해결을 하는데 이용하기 위해서라고 할 수 있습니다. 이 수업에서는 버전간의 차이점을 확인하는 방법에 대해서 알아봅니다. 

1. 차이점을 알 수 있음

2. 과거로 돌아 갈 수 있습니다.

> git log
과거의 역사를 볼 수 있습니다. 

> git log -p
git log 뒤에 옵션 -p를 붙이면 각각의 소스와 소스 사이의 정보를 확인하게 되고 
아래와 같은 메시지가 보입니다. 
--- a/f1.txt
+++ b/f1.txt
여기서 -는 이전 버전을 뜻하고 +는 현재(싱대적으로 -보다 더 가까운 시각) 버전을 의미합니다. 

또 다른 방법이 있습니다. 

우선, 
> git status 
commit 6576d31fca66870cdb07d75480d24366d484b3b4 가 있습니다. 
여기서 엄청나게 긴 고유한 값이 보이는데 이걸 복사해서 

> git log 'commit주소'
해당 커밋 주소 이전의 log기록들만 보여준다. 

여기서 해당 커밋된 각각의 기록들 간의 차이를 알고 싶다면? 
> git diff 'commit주소1'..'다른 커밋주소2'
즉 commit주소1과 다른 커밋주소2의 차이점을 보여줍니다. 

<또 다른 편리한 명령어>

f1.txt파일을 수정해보겠습니다. vim 편집기로 수정하세요. 
f1.txt : 5로 바꾸어 줍니다. 그럼 이제 나오자 마자 

> git diff
를 하게 되면 아래와 같은 메시지가 나옵니다.  
diff --git a/f1.txt b/f1.txt
index 9c8cdbd..4d5a9dd 100644
--- a/f1.txt        <---과거
+++ b/f1.txt        <---현재
@@ -1,2 +1,2 @@

-f1.txt : 4         <--과거
+f1.txt : 5         < --- 현재
즉, 어떠한 작업을 했는지 알게된다. 
실제 커밋을 하기전에 자기가 작업한 내용이 문제가 있는지 없는지 마지막으로 review한다고 할 수 있습니다. 

> git add f1.txt
> git diff
나타나는게 없습니다. 

> git commit 

# 과거의 버전으로 돌아가기  

### 버전관리의 중요한 효용은 과거의 상태로 돌아갈 수 있다는 점입니다. 여기서는 이 방법에 대해서 알아봅니다. 한가지 주의하실 점은 과거로 돌아가는 작업은 위험한 작업입니다. 여기서는 과거로 돌아가는 방법이 있다는 점만 우선 확인하시고, 실제로 사용할 때는 좀 더 깊게 공부하고 사용하시는 것이 좋습니다. 

수업에서 사용한 명령
아래 명령은 버전 id로 돌아가는 명령입니다. 

    - git reset "버전 id" --hard 

버전 id의 커밋을 취소한 내용을 새로운 버전으로 만드는 명령  

    - git revert "버전 id"

!!주의 reset과 revert를 사용 할 때 과거 기록들이 날아 갈수 있다고 합니다.

> git log
5와 4를 삭제하고 3으로 돌아가고 싶다면?
가장 쉬운 방법은 reset입니다. 
git reset을 한다면 과연 3도 사라지는 것인지?있는것인지?

> git reset 6576d31fca66870cdb07d75480d24366d484b3b4 --hard
그럼 3이후로 나오는 4,5가 사라졌습니다.
즉 3이후의 소스코드 상태로 돌아가게 된것입니다. 

!! 깃에서는 왠만하면 어떠한 정보도 삭제하지 않는다는걸 명심하세요. 
실제로 버전 2개를 버렸다고 생각하지만 실제 버린건 아니고 눈에 보이지 않는것일뿐. 
나중에 복구 방법에 대해 알게 됩니다. 
다시 말하지만 협업시에는 reset을 사용하면 안됩니다. 본인의 컴퓨터에서 사용하는 레퍼지토리나 로컬폴더에만 reset을 하는게 순리입니다. 

reset 이외의 revert라는 방법이 있습니다. 
commit을 취소하면서 새로운 버전을 생성하게 합니다. 


# 명령의 빈도와 메뉴얼 보는 방법

### 여기서는 git에서 자주 사용되는 명령어를 소개합니다. 그리고 스스로 방법을 찾는 방법도 알아봅니다. 

명령의 빈도수
command	     google     results	%

commit	    528,000	    7.981980075
push	    523,000	    7.906393143
pull	    506,000	    7.649397572
clone	    489,000	    7.392402002
checkout	470,000	    7.105171658
add	        446,000	    6.742354382
branch	    439,000	    6.636532676
log	        388,000	    5.865545964
diff	    369,000	    5.578315621
fetch	    355,000	    5.36667221
merge	    354,000	    5.351554823
init	    343,000	    5.185263572
status	    286,000	    4.323572541
reset	    267,000	    4.036342197
tag	        246,000	    3.718877081
rebase	    203,000	    3.068829461
rm	        142,000	    2.146668884
show	    104,000	    1.572208197
bisect	    62,800	    0.9493718726
grep	    49,400	    0.7467988934
mv	        44,700	    0.6757471768

> git commit --help
commit 메시지에 대한 도움말을 보실수 있게 웹페이지가 나타납니다. 

> vim f1.txt
> git commit -a 
그동안 우리가 수정하거나 삭제했던 파일들을 자동으로 add넣어서 커밋상태로 넘어갑니다.

> git commit -am '커밋메시지' 
바로 인라인에서 커밋메시지를 작성하는 방법입니다. 